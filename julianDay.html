<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>Julian Day</title>
    <meta http-equiv="content-type" content="text/html;charset=utf-8" />

    <style>
    #julianDay {
        display:inline;
        font-weight: bold;
        color: red;
    }

    #sampleEasCode {
        display:inline;
        font-weight: bold;
        color: black;
    }
    </style>
</head>

<body>
    <h1>EAS Test Codes</h1>
    Counting from January 1st, today is day number:
    <div id="julianDay"></div>
    <p></p>
    Example EAS code based on current date and time:
    <div id="sampleEasCode"></div>

    <script>
    var leapYears = [2012, 2016, 2020];
    var todaysDate = new Date();
    var year = todaysDate.getFullYear();
    var hours = todaysDate.getHours();
    var hoursAsStr = hours.toString();
    var minutes = todaysDate.getMinutes();
    var minutesAsStr = minutes.toString();
    var dayDiffMsec = Date.parse(todaysDate) - Date.parse(year + "-01-01");
    var yearDay = Math.round((Number(dayDiffMsec) / 86400000) + 0.5);
    var leapYearDay = Math.round((Number(dayDiffMsec) / 86400000) + 1.5);

    if (hoursAsStr.length == 1) {
        hoursAsStr = '0' + hoursAsStr;
    }

    if (minutesAsStr.length == 1) {
        minutesAsStr = "0" + minutesAsStr
    }

    if (leapYears.indexOf(year) == -1) {
        document.getElementById("julianDay").innerHTML = yearDay;
        document.getElementById("sampleEasCode").innerHTML = "ZCZC-WXR-BZW-036000+0005-" + yearDay + hoursAsStr + minutesAsStr + "-AMINO–";
    }
    
    else {
        document.getElementById("julianDay").innerHTML = leapYearDay;
        document.getElementById("sampleEasCode").innerHTML = "ZCZC-WXR-BZW-036000+0005-" + leapYearDay + hours + minutes + "-AMINO–";
    }
    </script>
</body>
</html>
